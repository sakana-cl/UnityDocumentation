<!-- #BeginTemplate "/Templates/manual-page.dwt" --><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Develop once, publish everywhere! Unity is the ultimate tool for video game development, architectural visualizations, and interactive media installations &ndash; publish to the web, Windows, OS X, Wii, Xbox 360, and iPhone with many more platforms to come." />
  <meta name="author" content="Unity Technologies" />
  <link rel="shortcut icon" href="http://unity3d.com/resources/favicons/favicon.ico" />
  <link rel="icon" type="image/png" href="http://unity3d.com/resources/favicons/favicon.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://unity3d.com/resources/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://unity3d.com/resources/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://unity3d.com/resources/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon-precomposed" href="http://unity3d.com/resources/favicons/apple-touch-icon.png">
	<!-- #TemplateBeginEditable name="doctitle" -->
		<title>Unity - Sub-State Machines</title>
	<!-- #TemplateEndEditable -->
	
	<link rel="StyleSheet"  href="../Images/docs.css" type="text/css" />
</head>
<body onLoad="DocLoaded();">

<div id="master-header" class="master-header" role="main-header">
  <div class="header-wrapper">
    <div class="top-nav">
      <ul>
        <li class="tn-icon"><a href="../../Documentation.html">Home</a></li>
        <!-- #TemplateBeginEditable name="sections-nav" -->
        <li class="Manual"><a href="../Manual/index.html" title="Go to Unity manual" class="scripting-anchor manual">Manual</a></li>
        <li class="Manual"><a href="../Components/index.html" title="Go to Reference" class="scripting-anchor reference">Reference</a></li>
        <li class="Manual"><a href="../ScriptReference/index.html" title="Go to Scripting Reference" class="scripting-anchor scripting">Scripting</a></li>
        <!-- #TemplateEndEditable --> 
      </ul>
    </div>
    <div class="sub-nav">
      <div class="content">
        <div class="path">
        <!-- #TemplateBeginEditable name="path" -->
			<a href="../Manual/index.html">Unity Manual</a><span>&gt;</span><a href="../Manual/UserGuide.html">User Guide</a><span>&gt;</span><a href="../Manual/CreatingGameplay.html">Creating Gameplay</a><span>&gt;</span><a href="../Manual/MecanimAnimationSystem.html">Mecanim Animation System</a><span>&gt;</span><a href="../Manual/Bringingcharacterstolife.html">Bringing Characters to Life</a><span>&gt;</span><a href="../Manual/Advancedtopics.html">Mecanim Advanced topics</a><span>&gt;</span><a href="../Manual/NestedStateMachines.html">Sub-State Machines</a>
        <!-- #TemplateEndEditable -->
        </div>
        <div class="switch">
        <!-- #TemplateBeginEditable name="switchLink" -->
        <!--BeginSwitchLink--><!--EndSwitchLink-->
        <!-- #TemplateEndEditable --> 
        </div>
      </div>
    </div>
  </div>
</div>

<div class="manual">
	<div class="main">

		<!-- #TemplateBeginEditable name="navigation" -->
		<div class="nav">
		<div class="nav-prev">
			<a href='../Manual/AnimatorCurves.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Previous</div>
				<div class="nav-right"></div>
			</a>
		</div>
	
		<div class="nav-next">
			<a href='../Manual/AnimationLayers.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Next</div>
				<div class="nav-right"></div>
			</a>
		</div>
	</div>
		<!-- #TemplateEndEditable -->	
		<!-- #TemplateBeginEditable name="title" -->
			<h1>Sub-State Machines</h1>
		<!-- #TemplateEndEditable -->	
		<!-- #TemplateBeginEditable name="body" -->
			
    <script src="../Images/showhide.js" type="text/javascript"></script>
    
<p>It is common for a character to have complex actions that consist of a number of stages. Rather than handle the entire action with a single state, it makes sense to identify the separate stages and use a separate state for each. For example, a character may have an action called "Trickshot" where it crouches to take a steady aim, shoots and then stands up again.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-0.jpg' /><br /><em>The sequence of states in a "Trickshot" action</em></div>
<p class='vspace'>Although this is useful for control purposes, the downside is that the state machine will become large and unwieldy as more of these complex actions are added. You can simplify things somewhat just by separating the groups of states visually with empty space in the editor. However, Mecanim goes a step further than this by allowing you to collapse a group of states into a single named item in the state machine diagram. These collapsed groups of states are called <span class='doc-keyword'>Sub-state machines</span>.
</p>
<p class='vspace'>You can create a sub-state machine by right clicking on an empty space within the <span class='doc-inspector'>Animator Controller</span> window and selecting <span class='doc-menu'>Create Sub-State Machine</span> from the context menu. A sub-state machine is represented in the editor by an elongated hexagon to distinguish it from normal states.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-1.jpg' /><br /><em>A sub-state machine</em></div>
<p class='vspace'>When you double-click the hexagon, the editor is cleared to let you edit the sub-state machine as though it were a completely separate state machine in its own right. The bar at the top of the window shows a "breadcrumb trail" to show which sub-state machine is currently being edited (and note that you can create sub-state machines within other sub-state machines, and so on). Clicking an item in the trail will focus the editor on that particular sub-state machine.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-2.jpg' /><br /><em>The "breadcrumb trail"</em></div>
<div class='vspace'></div><h2>External transitions</h2>
<p>As noted above, a sub-state machine is just a way of visually collapsing a group of states in the editor, so when you make a transition to a sub-state machine, you have to choose which of its states you want to connect to.  
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-3.jpg' /><br /><em>Choosing a target state within the "Trickshot" sub-state machine</em></div>
<p class='vspace'>You will notice an extra state in the sub-state machine whose name begins with <em>Up</em>.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-4.jpg' /><br /><em>The "Up" state</em></div>
<p class='vspace'>The <em>Up</em> state represents the "outside world", the state machine that encloses the sub-state machine in the view. If you add a transition from a state in sub-state machine to the <em>Up</em> state, you will be prompted to choose one of the states of the enclosing machine to connect to.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/NestedStateMachines-5.jpg' /><br /><em>Connecting to a state in the enclosing machine</em></div>
<p class='vspace'>(back to <a href="../Manual/AnimationStateMachines.html">State Machines introduction</a>)
</p>
<p class='vspace'>(back to <a href="../Manual/MecanimAnimationSystem.html">Mecanim introduction</a>)
</p>
<p><small>Page last updated: 2012-11-07</small></p>
		<!-- #TemplateEndEditable -->	

		<div class="nav">
		<div class="nav-prev">
			<a href='../Manual/AnimatorCurves.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Previous</div>
				<div class="nav-right"></div>
			</a>
		</div>
	
		<div class="nav-next">
			<a href='../Manual/AnimationLayers.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Next</div>
				<div class="nav-right"></div>
			</a>
		</div>
	</div>
	</div>
</div>
</body></html>
<!-- #EndTemplate -->
